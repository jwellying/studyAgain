# 当用户在地址栏输入一个网址到用户看到一个页面，浏览器发生了什么？
域名解析 --> 发起TCP的3次握手 --> 建立TCP连接后发起http请求 --> 服务器响应http请求，浏览器得到html代码 --> 浏览器解析html代码，并请求html代码中的资源（如js、css、图片等） --> 浏览器对页面进行渲染呈现给用户
+ 先会浏览器的缓存中寻找映射，再从操作系统的缓存中寻找映射，从本地的host文件 查找相应的IP映射 
+ 如果没有查到 就会从DNS服务器上去查找IP的映射 
+ 发起TCP的三次握手，建立起TCP连接后，浏览器会把请求的数据根据（http协议或者https）封装成相应的数据包转发给找到相应的服务器 
+ 服务器处理请求之后，处理并返回数据
+ 数据（可能是一个页面，也可能是一个json数据）
+ 浏览器拿到html页面后，开始解析html，开始逐行解析，遇到script或link标签开始下载相应的js、css资源
+ 浏览器会把html代码解析成一棵dom树，css解析成样式结构体，两者合并成为一棵render tree
+ 渲染页面



# TCP三次握手详解
所谓三次握手（Three-Way Handshake）即建立TCP连接，就是指建立一个TCP连接时，需要客户端和服务端总共发送3个包以确认连接的建立。
+ 第一次握手：Client将标志位SYN置为1，随机产生一个值seq=J，并将该数据包发送给Server，Client进入SYN_SENT状态，等待Server确认。
+ 第二次握手：Server收到数据包后由标志位SYN=1知道Client请求建立连接，Server将标志位SYN和ACK都置为1，ack=J+1，随机产生一个值seq=K，并将该数据包发送给Client以确认连接请求，Server进入SYN_RCVD状态。
+ 第三次握手：Client收到确认后，检查ack是否为J+1，ACK是否为1，如果正确则将标志位ACK置为1，ack=K+1，并将该数据包发送给Server，Server检查ack是否为K+1，ACK是否为1，如果正确则连接建立成功，Client和Server进入ESTABLISHED状态，完成三次握手，随后Client与Server之间可以开始传输数据了。
# 为什么需要三次握手，而不是二次握手？
主要是为了防止两次握手情况下已失效的连接请求报文段突然又传送到服务端,而产生的错误。举例如下:

Client向Server发出TCP连接请求,第一个连接请求报文在网络的某个节点长时间滞留,Client超时后认为报文丢失,于是再重传一次连接请求,Server收到后建立连接。数据传输完毕后双方断开连接。而此时,前一个滞留在网络中的连接请求到达了服务端Server,而Server认为Client又发来连接请求,若采用的是“两次握手”,则这种情况下Server认为传输连接已经建立,并一直等待Client传输数据,而Client此时并无连接请求,因此不予理睬,这样就造成了Server的资源白白浪费了;但此时若是使用“三次握手”,则Server向Client返回确认报文段,由于是一个失效的请求,因此Client不予理睬,建立连接失败。第三次握手的作用:防止已失效的连接请求报文段突然又传送到了服务器。


