### v-for中key的作用

如果想知道key的作用，不得我们得聊一下虚拟DOM的Diff算法

所谓虚拟DOM的诞生，使我们可以不直接操作DOM元素，只操作数据便可以重新渲染页面。而隐藏在背后的原理便是其高效的Diff算法，它的核心是基于两个简单的假设：

1. 两个相同的组件产生类似的DOM结构，不同的组件产生不同的DOM结构

2. 同一个层级的一组节点，他们可以通过唯一的id进行区分，又因为diff算法在比较的时候遵循同级比较的规则

所有我们**需要使用key来给每个节点做一个唯一的标识，Diff算法就可以正确的识别此节点，找到正确的位置区插入新的节点**

所以一句话，***key的作用主要是为了高效的更新虚拟DOM***。另外vue的在使用相同标签名元素的过渡切换时，也会使用到key属性，其目的也是为了让vue可以区分他们，否则vue只会替换其内部属性而不会触发过渡效果。

1. 如果不加key,那么vue会选择复用节点(Vue的就地更新策略),导致之前节点的状态被保留下来,会产生一系列的bug.
2. key的唯一性可以被Map数据结构充分利用,相比于遍历查找的时间复杂度O(n),Map的时间复杂度仅仅为O(1).

面试版：
1. 首先从虚拟dom说起，虚拟dom的diff算法基于两个假设，两个相同的组件产生类似的dom结构，不同的组件产生不同的结构；diff算法遵循同级比较的规则，同级间一组节点可以通过id进行区分；
2. 在更新前后标签名相同的场景中，如果不加key,那么vue会选择复用节点(Vue的就地更新策略),导致之前节点的状态被保留下来,会产生一系列的bug.
3. key的唯一性可以被Map数据结构充分利用,相比于遍历查找的时间复杂度O(n),Map的时间复杂度仅仅为O(1).
